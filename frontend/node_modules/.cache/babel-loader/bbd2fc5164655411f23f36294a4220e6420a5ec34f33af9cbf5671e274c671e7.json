{"ast":null,"code":"var _jsxFileName = \"/Volumes/workspace/Field of work/APARAVI2/frontend/src/pages/Search.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useMutation } from 'react-query';\nimport axios from 'axios';\nimport { Box, TextField, Button, FormControl, InputLabel, Select, MenuItem, Paper, Typography, Alert, CircularProgress } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst queryTypes = [{\n  value: 'factual',\n  label: 'Factual'\n}, {\n  value: 'summarization',\n  label: 'Summarization'\n}, {\n  value: 'semantic_linkage',\n  label: 'Semantic Linkage'\n}, {\n  value: 'reasoning',\n  label: 'Reasoning'\n}];\nconst Search = () => {\n  _s();\n  const navigate = useNavigate();\n  const [query, setQuery] = useState('');\n  const [queryType, setQueryType] = useState('factual');\n  const [error, setError] = useState(null);\n  const searchMutation = useMutation(async data => {\n    const response = await axios.post('http://localhost:8000/api/query', data);\n    return response.data;\n  }, {\n    onSuccess: data => {\n      navigate('/results', {\n        state: {\n          query,\n          queryType,\n          results: data\n        }\n      });\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || 'An error occurred while processing your query');\n    }\n  });\n  const handleSearch = async () => {\n    setError(null);\n    searchMutation.mutate({\n      text: query,\n      type: queryType\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: Paper,\n    sx: {\n      p: 4,\n      maxWidth: 800,\n      mx: 'auto',\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 3\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Enter your query\",\n        value: query,\n        onChange: e => setQuery(e.target.value),\n        multiline: true,\n        rows: 3,\n        sx: {\n          mb: 2\n        },\n        disabled: searchMutation.isLoading,\n        error: !!error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        sx: {\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Query Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: queryType,\n          label: \"Query Type\",\n          onChange: e => setQueryType(e.target.value),\n          disabled: searchMutation.isLoading,\n          children: queryTypes.map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: type.value,\n            children: type.label\n          }, type.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        variant: \"contained\",\n        startIcon: searchMutation.isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 20,\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }, this),\n        onClick: handleSearch,\n        disabled: !query.trim() || searchMutation.isLoading,\n        children: searchMutation.isLoading ? 'Searching...' : 'Search'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(Search, \"zvLxrCUR4ixbjtrmEZPKj6aHJDc=\", false, function () {\n  return [useNavigate, useMutation];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useNavigate","useMutation","axios","Box","TextField","Button","FormControl","InputLabel","Select","MenuItem","Paper","Typography","Alert","CircularProgress","SearchIcon","jsxDEV","_jsxDEV","queryTypes","value","label","Search","_s","navigate","query","setQuery","queryType","setQueryType","error","setError","searchMutation","data","response","post","onSuccess","state","results","onError","_error$response","_error$response$data","detail","handleSearch","mutate","text","type","component","sx","p","maxWidth","mx","mt","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","fullWidth","onChange","e","target","multiline","rows","disabled","isLoading","map","startIcon","size","color","onClick","trim","_c","$RefreshReg$"],"sources":["/Volumes/workspace/Field of work/APARAVI2/frontend/src/pages/Search.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useMutation } from 'react-query';\nimport axios from 'axios';\nimport {\n  Box,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Paper,\n  Typography,\n  Alert,\n  CircularProgress,\n} from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\n\nconst queryTypes = [\n  { value: 'factual', label: 'Factual' },\n  { value: 'summarization', label: 'Summarization' },\n  { value: 'semantic_linkage', label: 'Semantic Linkage' },\n  { value: 'reasoning', label: 'Reasoning' },\n];\n\nconst Search: React.FC = () => {\n  const navigate = useNavigate();\n  const [query, setQuery] = useState('');\n  const [queryType, setQueryType] = useState('factual');\n  const [error, setError] = useState<string | null>(null);\n\n  const searchMutation = useMutation(\n    async (data: { text: string; type: string }) => {\n      const response = await axios.post('http://localhost:8000/api/query', data);\n      return response.data;\n    },\n    {\n      onSuccess: (data) => {\n        navigate('/results', {\n          state: {\n            query,\n            queryType,\n            results: data,\n          },\n        });\n      },\n      onError: (error: any) => {\n        setError(\n          error.response?.data?.detail ||\n            'An error occurred while processing your query'\n        );\n      },\n    }\n  );\n\n  const handleSearch = async () => {\n    setError(null);\n    searchMutation.mutate({\n      text: query,\n      type: queryType,\n    });\n  };\n\n  return (\n    <Box\n      component={Paper}\n      sx={{\n        p: 4,\n        maxWidth: 800,\n        mx: 'auto',\n        mt: 4,\n      }}\n    >\n      <Typography variant=\"h4\" gutterBottom>\n        Search\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n      <Box sx={{ mb: 3 }}>\n        <TextField\n          fullWidth\n          label=\"Enter your query\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          multiline\n          rows={3}\n          sx={{ mb: 2 }}\n          disabled={searchMutation.isLoading}\n          error={!!error}\n        />\n\n        <FormControl fullWidth sx={{ mb: 2 }}>\n          <InputLabel>Query Type</InputLabel>\n          <Select\n            value={queryType}\n            label=\"Query Type\"\n            onChange={(e) => setQueryType(e.target.value)}\n            disabled={searchMutation.isLoading}\n          >\n            {queryTypes.map((type) => (\n              <MenuItem key={type.value} value={type.value}>\n                {type.label}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n\n        <Button\n          fullWidth\n          variant=\"contained\"\n          startIcon={\n            searchMutation.isLoading ? (\n              <CircularProgress size={20} color=\"inherit\" />\n            ) : (\n              <SearchIcon />\n            )\n          }\n          onClick={handleSearch}\n          disabled={!query.trim() || searchMutation.isLoading}\n        >\n          {searchMutation.isLoading ? 'Searching...' : 'Search'}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Search; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}